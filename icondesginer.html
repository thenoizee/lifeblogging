<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IconGenius - Dynamic Icon Generator</title>
    <link rel="icon" href="/favicons/pen-to-square.svg" type="image/svg+xml">
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>

    <style>
        :root {
            --bg-color: #f7fafc;
            --card-bg: #ffffff;
            --text-main: #1a202c;
            --input-bg: #edf2f7;
            --border-color: #e2e8f0;
        }
        .dark {
            --bg-color: #0f172a;
            --card-bg: #1e293b;
            --text-main: #f1f5f9;
            --input-bg: #334155;
            --border-color: #475569;
        }
        body { font-family: 'Inter', sans-serif; background: var(--bg-color); color: var(--text-main); transition: all 0.3s; }
        .control-group { margin-bottom: 1.25rem; }
        .control-label { display: block; font-size: 0.875rem; font-weight: 600; margin-bottom: 0.5rem; }
        input[type="color"] { -webkit-appearance: none; border: none; width: 32px; height: 32px; padding: 0; overflow: hidden; border-radius: 50%; cursor: pointer; }
        input[type="color"]::-webkit-color-swatch-wrapper { padding: 0; }
        input[type="color"]::-webkit-color-swatch { border: none; }
        
        /* Checkerboard background for transparency context */
        .preview-area {
            background-color: #e5e5f7;
            background-image:  repeating-linear-gradient(45deg, #d4d4ea 25%, transparent 25%, transparent 75%, #d4d4ea 75%, #d4d4ea), repeating-linear-gradient(45deg, #d4d4ea 25%, #e5e5f7 25%, #e5e5f7 75%, #d4d4ea 75%, #d4d4ea);
            background-position: 0 0, 10px 10px;
            background-size: 20px 20px;
        }
    </style>
</head>
<body class="min-h-screen pb-20">

    <div class="container mx-auto px-4 mt-8 max-w-6xl">
        <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
            
            <div class="lg:col-span-4 space-y-6">
                <div class="bg-[var(--card-bg)] p-6 rounded-2xl shadow-xl border border-[var(--border-color)]">
                    <h2 class="text-xl font-bold mb-4 border-b border-[var(--border-color)] pb-2">Configuration</h2>
                    
                    <div class="control-group">
                        <label class="control-label">Icon Class</label>
                        <div class="flex gap-2 mb-2">
                            <input type="text" id="icon-class" value="fa-solid fa-rocket" class="flex-1 bg-[var(--input-bg)] rounded px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 outline-none" placeholder="e.g. fa-brands fa-github">
                            <a href="https://fontawesome.com/search" target="_blank" class="bg-blue-600 text-white p-2 rounded hover:bg-blue-700" title="Find FontAwesome"><i class="fa-solid fa-magnifying-glass"></i></a>
                            <a href="https://phosphoricons.com/" target="_blank" class="bg-purple-600 text-white p-2 rounded hover:bg-purple-700" title="Find Phosphor"><i class="ph-bold ph-magnifying-glass"></i></a>
                        </div>
                        <p class="text-xs text-gray-500 dark:text-gray-400">Supports FontAwesome 6 & Phosphor Icons</p>
                    </div>

                    <div class="control-group">
                        <label class="control-label">Colors</label>
                        <div class="grid grid-cols-3 gap-2">
                            <div class="text-center">
                                <input type="color" id="color-icon" value="#ffffff">
                                <div class="text-xs mt-1">Icon</div>
                            </div>
                            <div class="text-center">
                                <input type="color" id="color-bg-1" value="#4f46e5">
                                <div class="text-xs mt-1">Bg Start</div>
                            </div>
                            <div class="text-center">
                                <input type="color" id="color-bg-2" value="#9333ea">
                                <div class="text-xs mt-1">Bg End</div>
                            </div>
                        </div>
                        <div class="flex items-center gap-2 mt-3">
                            <input type="checkbox" id="use-gradient" checked class="rounded text-blue-600 focus:ring-blue-500">
                            <label for="use-gradient" class="text-sm">Use Gradient Background</label>
                        </div>
                    </div>

                    <div class="control-group">
                        <div class="flex justify-between mb-1"><label class="control-label">Container Size</label><span id="val-size" class="text-xs text-gray-500">128px</span></div>
                        <input type="range" id="size-container" min="32" max="512" value="128" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                    </div>

                    <div class="control-group">
                        <div class="flex justify-between mb-1"><label class="control-label">Icon Size</label><span id="val-icon-size" class="text-xs text-gray-500">50%</span></div>
                        <input type="range" id="size-icon" min="10" max="100" value="50" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                    </div>

                    <div class="control-group">
                        <div class="flex justify-between mb-1"><label class="control-label">Border Radius</label><span id="val-radius" class="text-xs text-gray-500">20%</span></div>
                        <input type="range" id="radius" min="0" max="50" value="20" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                    </div>

                    <div class="control-group">
                        <label class="control-label">Border</label>
                        <div class="flex gap-2 items-center">
                            <input type="color" id="color-border" value="#ffffff" class="w-8 h-8">
                            <input type="range" id="border-width" min="0" max="20" value="0" class="flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                            <span id="val-border" class="text-xs text-gray-500 w-8 text-right">0px</span>
                        </div>
                    </div>

                    <div class="control-group">
                        <label class="control-label">Shadow</label>
                        <div class="flex flex-col gap-2">
                             <div class="flex items-center gap-2">
                                <label class="text-xs w-12">Opacity</label>
                                <input type="range" id="shadow-opacity" min="0" max="1" step="0.1" value="0.3" class="flex-1 h-2 bg-gray-200 rounded-lg cursor-pointer">
                             </div>
                             <div class="flex items-center gap-2">
                                <label class="text-xs w-12">Blur</label>
                                <input type="range" id="shadow-blur" min="0" max="50" value="10" class="flex-1 h-2 bg-gray-200 rounded-lg cursor-pointer">
                             </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="lg:col-span-8 space-y-6">
                
                <div class="bg-[var(--card-bg)] p-8 rounded-2xl shadow-xl border border-[var(--border-color)] flex flex-col items-center justify-center min-h-[400px]">
                    <h3 class="text-gray-400 text-sm font-bold uppercase tracking-wider mb-6">Live Preview</h3>
                    
                    <div class="preview-area p-10 rounded-xl border border-dashed border-gray-300 dark:border-gray-600">
                        <div id="icon-preview" class="flex items-center justify-center transition-all duration-200">
                            <i id="preview-i" class=""></i>
                        </div>
                    </div>

                    <div class="mt-8 flex gap-3">
                        <button id="btn-dl-png" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-bold shadow-lg transition-transform hover:-translate-y-0.5">
                            <i class="fa-solid fa-download mr-2"></i>Download PNG
                        </button>
                        <button id="btn-copy-html" class="bg-emerald-600 hover:bg-emerald-700 text-white px-6 py-2 rounded-lg font-bold shadow-lg transition-transform hover:-translate-y-0.5">
                            <i class="fa-solid fa-code mr-2"></i>Copy HTML
                        </button>
                    </div>
                </div>

                <div class="bg-[var(--card-bg)] rounded-2xl shadow-xl border border-[var(--border-color)] overflow-hidden">
                    <div class="bg-gray-100 dark:bg-gray-800 px-4 py-2 border-b border-[var(--border-color)] flex justify-between items-center">
                        <span class="text-xs font-mono font-bold text-gray-500">GENERATED CODE</span>
                        <div class="flex gap-2">
                            <button id="mode-html" class="text-xs font-bold px-2 py-1 bg-white dark:bg-gray-700 rounded shadow-sm">HTML</button>
                            <button id="mode-tailwind" class="text-xs font-bold px-2 py-1 text-gray-400 hover:text-gray-600">Tailwind (Approx)</button>
                        </div>
                    </div>
                    <textarea id="code-output" readonly class="w-full h-32 p-4 font-mono text-sm bg-[var(--card-bg)] text-[var(--text-main)] outline-none resize-none"></textarea>
                </div>

            </div>
        </div>
    </div>

    <script type="module">
        import { AppNavigation } from '/shared-nav.js';
        import { changelogData } from '/changelog-data.js';

        // Initialize Nav
        const nav = new AppNavigation({
            appName: 'IconGenius',
            appIcon: 'fa-palette',
            themeColor: 'pink',
            activeTab: 'designer',
            version: changelogData[0].version
        });

        // Elements
        const el = {
            class: document.getElementById('icon-class'),
            colorIcon: document.getElementById('color-icon'),
            colorBg1: document.getElementById('color-bg-1'),
            colorBg2: document.getElementById('color-bg-2'),
            useGradient: document.getElementById('use-gradient'),
            sizeContainer: document.getElementById('size-container'),
            sizeIcon: document.getElementById('size-icon'),
            radius: document.getElementById('radius'),
            colorBorder: document.getElementById('color-border'),
            borderWidth: document.getElementById('border-width'),
            shadowOpacity: document.getElementById('shadow-opacity'),
            shadowBlur: document.getElementById('shadow-blur'),
            // Display & Preview
            previewBox: document.getElementById('icon-preview'),
            previewIcon: document.getElementById('preview-i'),
            codeOutput: document.getElementById('code-output'),
            // Value labels
            valSize: document.getElementById('val-size'),
            valIconSize: document.getElementById('val-icon-size'),
            valRadius: document.getElementById('val-radius'),
            valBorder: document.getElementById('val-border')
        };

        function generate() {
            // Values
            const size = el.sizeContainer.value;
            const iSize = el.sizeIcon.value;
            const rad = el.radius.value;
            const bWidth = el.borderWidth.value;
            const bColor = el.colorBorder.value;
            const cIcon = el.colorIcon.value;
            const cBg1 = el.colorBg1.value;
            const cBg2 = el.colorBg2.value;
            const isGrad = el.useGradient.checked;
            const sOp = el.shadowOpacity.value;
            const sBlur = el.shadowBlur.value;
            const iconClass = el.class.value;

            // Update Labels
            el.valSize.textContent = `${size}px`;
            el.valIconSize.textContent = `${iSize}%`;
            el.valRadius.textContent = `${rad}%`;
            el.valBorder.textContent = `${bWidth}px`;

            // Logic
            const bgStyle = isGrad 
                ? `linear-gradient(135deg, ${cBg1}, ${cBg2})`
                : cBg1;
            
            const shadowStyle = sOp > 0 
                ? `0 4px ${sBlur}px rgba(0,0,0,${sOp})` 
                : 'none';

            // Apply to Live Preview
            el.previewIcon.className = iconClass;
            
            // Container Styles
            Object.assign(el.previewBox.style, {
                width: `${size}px`,
                height: `${size}px`,
                background: bgStyle,
                borderRadius: `${rad}%`,
                border: `${bWidth}px solid ${bColor}`,
                boxShadow: shadowStyle,
                color: cIcon,
                fontSize: `${(size * (iSize/100))}px`
            });

            // Generate Code (Inline Styles for portability)
            const code = `
<div style="
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: ${size}px;
    height: ${size}px;
    background: ${bgStyle};
    border-radius: ${rad}%;
    border: ${bWidth}px solid ${bColor};
    box-shadow: ${shadowStyle};
    color: ${cIcon};
    font-size: ${(size * (iSize/100)).toFixed(0)}px;
">
    <i class="${iconClass}"></i>
</div>`.trim();

            el.codeOutput.value = code;
        }

        // Event Listeners
        Object.values(el).forEach(element => {
            if(element && (element.tagName === 'INPUT' || element.tagName === 'SELECT')) {
                element.addEventListener('input', generate);
            }
        });

        // Download PNG
        document.getElementById('btn-dl-png').addEventListener('click', () => {
            html2canvas(el.previewBox, { backgroundColor: null, scale: 2 }).then(canvas => {
                const link = document.createElement('a');
                link.download = `icon-${Date.now()}.png`;
                link.href = canvas.toDataURL();
                link.click();
            });
        });

        // Copy HTML
        document.getElementById('btn-copy-html').addEventListener('click', () => {
            el.codeOutput.select();
            navigator.clipboard.writeText(el.codeOutput.value);
            const btn = document.getElementById('btn-copy-html');
            const originalText = btn.innerHTML;
            btn.innerHTML = '<i class="fa-solid fa-check mr-2"></i>Copied!';
            setTimeout(() => btn.innerHTML = originalText, 2000);
        });

        // Init
        generate();

    </script>
</body>
</html>